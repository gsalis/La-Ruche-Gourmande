<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Commandez votre miel local de La Ruche Gourmande. Livraison dans un rayon de 20 km autour de Villerupt !" />
  <title>La Ruche Gourmande</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body { margin: 0; font-family: sans-serif; }
    header, footer { background: #ffcc33; padding: 1em; text-align: center; }
    header h1 { margin: 0; }
    nav a { margin: 0 1em; color: #333; text-decoration: none; font-weight: bold; }
    section { padding: 2em; max-width: 800px; margin: auto; }
    .gallery img { width: 100%; max-width: 250px; margin: 1em; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .gallery { display: flex; flex-wrap: wrap; justify-content: center; }
    form input, form textarea { width: 100%; padding: 0.5em; margin: 0.5em 0; }
    form button { padding: 0.5em 2em; background: #ffa500; border: none; color: white; cursor: pointer; }
    #map { height: 500px; margin-top: 2em; }
    .leaflet-control-custom { background-color: white; padding: 5px; cursor: pointer; }
    .video-container iframe { width: 100%; max-width: 600px; height: 315px; margin: 1em auto; display: block; }
  </style>
</head>
<body>

<header>
  <h1>La Ruche Gourmande</h1>
  <nav>
    <a href="#photos">Photos</a>
    <a href="#commande">Commander</a>
    <a href="#livraison">Livraison</a>
    <a href="#actualites">Actualit√©s</a>
    <a href="#contact">Contact</a>
  </nav>
</header>

<section id="intro">
  <h2>Bienvenue !</h2>
  <p>D√©couvrez notre miel artisanal produit √† Villerupt. Go√ªt pur, naturel, local. Commandez en ligne et nous vous livrons gratuitement dans un rayon de 20 km !</p>
</section>

<section id="photos">
  <h2>Nos ruches et notre miel</h2>
  <div class="gallery">
    <img src="https://source.unsplash.com/featured/?honey" alt="Pot de miel" />
    <img src="https://source.unsplash.com/featured/?beehive" alt="Ruche" />
    <img src="https://source.unsplash.com/featured/?bees" alt="Abeilles" />
  </div>
</section>

<section id="commande">
  <h2>Passer une commande</h2>
  <form>
    <label>Nom :</label>
    <input type="text" required />

    <label>Email :</label>
    <input type="email" required />

    <label>Quantit√© souhait√©e (en pots) :</label>
    <input type="number" min="1" required />

    <label>Adresse de livraison :</label>
    <textarea rows="3" required></textarea>

    <button type="submit">Envoyer la commande</button>
  </form>
</section>

<section id="livraison">
  <h2>Zone de livraison</h2>
  <p>Nous livrons dans un rayon de 20 km autour de Villerupt. Cliquez ci-dessous pour v√©rifier si vous √™tes dans la zone :</p>
  <div id="map"></div>
</section>

<section id="actualites">
  <h2>Actualit√©s ‚Äì Sant√© des abeilles et apiculture</h2>
  <div id="news-list">
    <p>Chargement des derni√®res actualit√©s depuis le GDSA, l'UNAF et la FNOSAD...</p>
  </div>

  <h3>üé• Vid√©os scientifiques recommand√©es</h3>
  <div class="video-container">
    <iframe src="https://www.youtube.com/embed/xg2rgn1dUnY" title="Red Trap contre frelon asiatique" frameborder="0" allowfullscreen></iframe>
  </div>
  <div class="video-container">
    <iframe src="https://www.youtube.com/embed/BwwzgPpBeBk" title="Placement d‚Äôun pi√®ge s√©lectif frelon asiatique" frameborder="0" allowfullscreen></iframe>
  </div>
</section>

<section id="contact">
  <h2>Contact</h2>
  <p>Pour toute question : <br />
  Email : <a href="mailto:contact@laruchegourmande.fr">contact@laruchegourmande.fr</a><br />
  T√©l√©phone : 06 22 71 10 71</p>
</section>

<footer>
  <p>&copy; 2025 La Ruche Gourmande ‚Äì Miel local √† Villerupt</p>
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  const centerLat = 49.4711;
  const centerLng = 5.9322;

  const map = L.map('map').setView([centerLat, centerLng], 11);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap'
  }).addTo(map);

  const deliveryCircle = L.circle([centerLat, centerLng], {
    radius: 20000,
    color: 'green',
    fillColor: '#9f9',
    fillOpacity: 0.3
  }).addTo(map);

  const checkButton = L.control({ position: 'topright' });
  checkButton.onAdd = function () {
    const div = L.DomUtil.create('div', 'leaflet-control-custom');
    div.innerHTML = 'üìç Suis-je dans la zone ?';
    div.onclick = () => {
      if (!navigator.geolocation) {
        alert("La g√©olocalisation n‚Äôest pas disponible sur votre appareil.");
        return;
      }
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const lat = pos.coords.latitude;
          const lng = pos.coords.longitude;
          const distance = map.distance([lat, lng], [centerLat, centerLng]);

          L.marker([lat, lng])
            .addTo(map)
            .bindPopup(
              distance <= 20000
                ? "üéâ Vous √™tes dans la zone de livraison !"
                : "üòî D√©sol√©, vous √™tes hors de la zone de livraison."
            )
            .openPopup();
        },
        (err) => {
          alert("Impossible de r√©cup√©rer votre position.");
        }
      );
    };
    return div;
  };
  checkButton.addTo(map);

  // Chargement dynamique des actualit√©s
  fetch(
    "https://api.rss2json.com/v1/api.json?rss_url=https://www.unaf-apiculture.info/feed/"
  )
    .then((response) => response.json())
    .then((data) => {
      const list = document.getElementById("news-list");
      list.innerHTML = "";
      data.items.slice(0, 5).forEach((item) => {
        const article = document.createElement("article");
        article.innerHTML = `<h4><a href="${item.link}" target="_blank">${item.title}</a></h4>
                             <p><em>${new Date(item.pubDate).toLocaleDateString()}</em></p>
                             <p>${item.description.slice(0, 200)}...</p>`;
        list.appendChild(article);
      });
    })
    .catch((error) => {
      document.getElementById("news-list").innerText =
        "Impossible de charger les actualit√©s. Veuillez r√©essayer plus tard.";
    });
</script>

</body>
</html>
