<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La Ruche Gourmande - Nos Miels Artisanaux</title>
<meta name="description" content="Découvrez les miels artisanaux de La Ruche Gourmande à Villerupt.">

<style>
  /* --- CSS inchangé --- */
  *{margin:0; padding:0; box-sizing:border-box;}
  body{font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#fff8e1; color:#333; line-height:1.6; min-height:100vh; display:flex; flex-direction:column;}
  .side-image{position:fixed; top:0; width:30%; height:100vh; object-fit:cover; z-index:-1; opacity:0.7; filter:blur(1px);}
  .left-img{left:0;}
  .right-img{right:0;}
  header{background:#f4b41a; padding:20px; text-align:center; position:relative; z-index:1;}
  header h1{font-size:2.5rem; font-weight:900; color:white; text-shadow:1px 1px 3px rgba(0,0,0,0.3);}
  nav{margin-top:15px; display:flex; justify-content:center; gap:15px; flex-wrap:wrap;}
  nav a{color:white; text-decoration:none; font-weight:bold; font-size:1.1rem; padding:10px 20px; border-radius:8px; transition:background-color 0.3s, transform 0.2s;}
  nav a:hover{background-color:rgba(0,0,0,0.2); transform:scale(1.05);}
  nav a:last-child{background-color:#e67e22; font-weight:900;}
  nav a:last-child:hover{background-color:#cf6b19;}
  main{max-width:900px; margin:40px auto; padding:40px 20px; text-align:center; background:rgba(255,255,255,0.95); border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.1); position:relative; z-index:1; flex:1;}
  h2{font-size:2rem; margin-bottom:20px; color:#f4b41a;}
  p{font-size:1.15rem; margin-bottom:20px; line-height:1.6;}
  .miels-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:20px; justify-items:center; margin-top:30px;}
  .miel-card{background:white; border-radius:12px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.1); cursor:pointer; text-decoration:none; width:100%; transition:transform 0.3s;}
  .miel-card:hover{transform:translateY(-5px);}
  .miel-card img{width:100%; height:220px; object-fit:cover;}
  .miel-card h3{background:#f4b41a; color:white; text-align:center; padding:12px; font-size:1.2rem;}
  .lightbox{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:999; flex-direction:column; padding:20px; overflow:auto;}
  .lightbox img{max-width:60%; max-height:60vh; border-radius:12px; box-shadow:0 0 20px rgba(0,0,0,0.5); margin-bottom:15px;}
  .lightbox .description{color:white; text-align:center; margin-bottom:20px; font-size:1.1rem; max-width:80%;}
  .lightbox .close, .lightbox .prev, .lightbox .next{position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.5); color:white; border:none; font-size:1.8rem; padding:10px 16px; cursor:pointer; border-radius:50%;}
  .lightbox .close{top:10%; right:5%; transform:none;}
  .lightbox .prev{left:5%;}
  .lightbox .next{right:5%;}
  .lightbox .btn-lightbox{display:inline-block; background:#e67e22; color:white; padding:10px 25px; border-radius:8px; font-weight:bold; text-decoration:none; transition:background 0.3s; margin-top:10px;}
  .lightbox .btn-lightbox:hover{background:#cf6b19;}
  .lightbox .controls{display:flex; flex-direction:column; gap:10px; align-items:center;}
  .lightbox label{margin-right:5px;}
  #cartModal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:1000; flex-direction:column; color:white;}
  #cartModal .modal-content{background:#333; padding:25px; border-radius:12px; text-align:center; max-width:400px;}
  #cartModal button{margin:10px; padding:10px 25px; border:none; border-radius:8px; cursor:pointer; font-weight:bold;}
  #cartModal .continue{background:#e67e22; color:white;}
  #cartModal .checkout{background:#27ae60; color:white;}
  footer{text-align:center; background:#f4b41a; color:white; padding:15px; margin-top:40px;}
  @media(max-width:1024px){.miels-grid{grid-template-columns:repeat(2,1fr);}.side-image{width:25%;}}
  @media(max-width:768px){.miels-grid{grid-template-columns:1fr;}.miel-card img{height:180px;}.side-image{display:none;}}
  @media(max-width:480px){.miel-card img{height:140px;}}
</style>
</head>
<body>

<!-- Images latérales -->
<img src="1-abeille-sur-fleur.jpg" alt="Abeille" class="side-image left-img" loading="lazy">
<img src="2-honey-1958464_1280.jpg" alt="Pot de miel" class="side-image right-img" loading="lazy">

<header>
  <h1>La Ruche Gourmande</h1>
  <nav>
    <a href="index.html">Accueil</a>
    <a href="produits.html">Nos Miels</a>
    <a href="actualité.html">Actualités</a>
    <a href="video.html">Vidéos</a>
    <a href="contact.html">Contact</a>
    <!-- Compteur panier -->
    <a href="commander.html" class="btn-contact orange" target="_blank">
      Panier (<span id="cartCount">0</span>)
    </a>
  </nav>
</header>

<main>
  <h2>Nos Miels Artisanaux</h2>
  <p style="font-style:italic;">« Le miel est un trésor de la nature, doux pour le corps et l’âme. » – Jean-Henri Fabre</p>
  <p><strong>Choisissez votre pot et cliquez sur l'image pour ajouter au panier.</strong></p>

  <div class="miels-grid">
    <a href="#" class="miel-card" data-index="0"><img src="3-miel de printemps 1.jpg" alt="Miel de printemps crémeux" loading="lazy"><h3>Miel de Printemps - crémeux</h3></a>
    <a href="#" class="miel-card" data-index="1"><img src="4-miel de printemps 2.jpg" alt="Miel de printemps crémeux" loading="lazy"><h3>Miel de Printemps - crémeux</h3></a>
    <a href="#" class="miel-card" data-index="2"><img src="5-miel d'été 1.jpg" alt="Miel d'été liquide" loading="lazy"><h3>Miel d'Été - liquide</h3></a>
    <a href="#" class="miel-card" data-index="3"><img src="6-miel d'été 2.jpg" alt="Miel d'été liquide" loading="lazy"><h3>Miel d'Été - liquide</h3></a>
    <a href="#" class="miel-card" data-index="4"><img src="7-miel fleur 1.jpg" alt="Miel de fleurs cristallisé" loading="lazy"><h3>Miel de Fleurs - cristallisé</h3></a>
    <a href="#" class="miel-card" data-index="5"><img src="8-miel fleur 2.jpg" alt="Miel de fleurs cristallisé" loading="lazy"><h3>Miel de Fleurs - cristallisé</h3></a>
  </div>
</main>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
  <button class="close" id="close">&times;</button>
  <button class="prev" id="prev">&#10094;</button>
  <div style="text-align:center;">
    <img src="" alt="Miel sélectionné" id="lightbox-img" loading="lazy">
    <div class="description" id="lightbox-desc"></div>
    <div class="controls">
      <div>
        <label for="quantity">Nombre de pots :</label>
        <input type="number" id="quantity" value="1" min="1">
      </div>
      <div>
        <label for="potSize">Format du pot :</label>
        <select id="potSize">
          <option value="250" data-price="6">250 g - 6€</option>
          <option value="500" data-price="12">500 g - 12€</option>
          <option value="1000" data-price="18">1 kg - 18€</option>
        </select>
      </div>
    </div>
    <div style="margin-top:10px; color:white; font-weight:bold;" id="totalPrice">Total : 6€</div>
    <a href="#" id="addToCart" class="btn-lightbox">Ajouter au panier</a>
  </div>
  <button class="next" id="next">&#10095;</button>
</div>

<!-- Modal panier -->
<div id="cartModal">
  <div class="modal-content">
    <p>Produit ajouté au panier !</p>
    <button class="continue" id="continueShopping">Continuer mes achats</button>
    <button class="checkout" id="goToCart">Valider le panier</button>
  </div>
</div>

<footer>
  <p>&copy; 2025 La Ruche Gourmande - Tous droits réservés</p>
</footer>

<script>
const images = [
  {src:"3-miel de printemps 1.jpg", desc:"Ce miel crémeux est issu des fleurs du printemps."},
  {src:"4-miel de printemps 2.jpg", desc:"Une autre récolte de printemps, offrant des arômes subtils."},
  {src:"5-miel d'été 1.jpg", desc:"Miel d’été liquide, léger et parfumé."},
  {src:"6-miel d'été 2.jpg", desc:"Deuxième récolte d’été, légèrement plus foncé."},
  {src:"7-miel fleur 1.jpg", desc:"Miel de fleurs cristallisé, riche en nutriments."},
  {src:"8-miel fleur 2.jpg", desc:"Deuxième récolte de miel de fleurs, goût subtil et texture onctueuse."}
];

let current = 0;
const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightbox-img');
const lightboxDesc = document.getElementById('lightbox-desc');
const quantityInput = document.getElementById('quantity');
const potSizeSelect = document.getElementById('potSize');
const addToCart = document.getElementById('addToCart');
const totalPrice = document.getElementById('totalPrice');

const cartModal = document.getElementById('cartModal');
const continueBtn = document.getElementById('continueShopping');
const checkoutBtn = document.getElementById('goToCart');

// --- Fonction compteur panier ---
function updateCartCount() {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  const total = cart.reduce((sum, item) => sum + item.qty, 0);
  const cartCountElem = document.getElementById('cartCount');
  if(cartCountElem) cartCountElem.textContent = total;
}

function updateTotal() {
  const qty = parseInt(quantityInput.value);
  const price = parseInt(potSizeSelect.selectedOptions[0].dataset.price);
  totalPrice.textContent = `Total : ${qty * price}€`;
}

function saveToCart() {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  const item = {
    index: current,
    name: images[current].desc,
    qty: parseInt(quantityInput.value),
    size: potSizeSelect.value,
    price: parseInt(potSizeSelect.selectedOptions[0].dataset.price)
  };
  cart.push(item);
  localStorage.setItem('cart', JSON.stringify(cart));

  lightbox.style.display='none';
  cartModal.style.display='flex';
  
  updateCartCount(); // mise à jour du compteur
}

// --- Événements ---
document.querySelectorAll('.miel-card').forEach(card=>{
  card.addEventListener('click', ()=>{
    current = parseInt(card.getAttribute('data-index'));
    lightboxImg.src = images[current].src;
    lightboxDesc.textContent = images[current].desc;
    quantityInput.value = 1;
    potSizeSelect.selectedIndex = 0;
    updateTotal();
    lightbox.style.display = 'flex';
  });
});

document.getElementById('close').addEventListener('click', ()=>{lightbox.style.display='none';});
document.getElementById('prev').addEventListener('click', ()=>{
  current = (current-1+images.length)%images.length;
  lightboxImg.src = images[current].src;
  lightboxDesc.textContent = images[current].desc;
  updateTotal();
});
document.getElementById('next').addEventListener('click', ()=>{
  current = (current+1)%images.length;
  lightboxImg.src = images[current].src;
  lightboxDesc.textContent = images[current].desc;
  updateTotal();
});

quantityInput.addEventListener('input', updateTotal);
potSizeSelect.addEventListener('change', updateTotal);
addToCart.addEventListener('click', saveToCart);

continueBtn.addEventListener('click', ()=>{cartModal.style.display='none';});
checkoutBtn.addEventListener('click', ()=>{window.location.href='commander.html';});

// --- Compteur initial au chargement ---
updateCartCount();
</script>

</body>
</html>
